# é¡¹ç›®æ”¹è¿›æ€»ç»“

> **æ”¹è¿›æ—¥æœŸ**: 2025-10-24  
> **ç‰ˆæœ¬**: 1.1.0  
> **æ”¹è¿›è€…**: AI Assistant

---

## ğŸ“‹ ç›®å½•

- [æ”¹è¿›æ¦‚è¿°](#æ”¹è¿›æ¦‚è¿°)
- [æ–°å¢åŠŸèƒ½](#æ–°å¢åŠŸèƒ½)
- [ä»£ç è´¨é‡æå‡](#ä»£ç è´¨é‡æå‡)
- [ä½¿ç”¨æŒ‡å—](#ä½¿ç”¨æŒ‡å—)
- [æ–‡ä»¶ç»“æ„](#æ–‡ä»¶ç»“æ„)
- [è¿ç§»æŒ‡å—](#è¿ç§»æŒ‡å—)

---

## ğŸ¯ æ”¹è¿›æ¦‚è¿°

æœ¬æ¬¡æ”¹è¿›å¯¹ AIGC å›¾åƒè´¨é‡è¯„ä¼°é¡¹ç›®è¿›è¡Œäº†å…¨é¢çš„å·¥ç¨‹åŒ–å‡çº§ï¼Œä¸»è¦ç›®æ ‡ï¼š

1. âœ… **æå‡ä»£ç è´¨é‡** - ç§»é™¤ç¡¬ç¼–ç ï¼Œå¼•å…¥é…ç½®ç®¡ç†ç³»ç»Ÿ
2. âœ… **å¢å¼ºå¯ç”¨æ€§** - æ·»åŠ æ¨ç†è„šæœ¬å’Œè¯„ä¼°å·¥å…·
3. âœ… **æ”¹å–„å·¥ç¨‹åŒ–** - æ·»åŠ æ—¥å¿—ç³»ç»Ÿã€æ··åˆç²¾åº¦è®­ç»ƒã€é”™è¯¯å¤„ç†
4. âœ… **å®Œå–„æ•°æ®å·¥å…·** - æ·»åŠ æ•°æ®åˆ†æå’Œé¢„å¤„ç†è„šæœ¬
5. âœ… **ä¿æŒå…¼å®¹æ€§** - ä¸ç ´ååŸæœ‰ä»£ç ï¼Œæä¾›å¹³æ»‘è¿ç§»è·¯å¾„

---

## ğŸš€ æ–°å¢åŠŸèƒ½

### 1. é…ç½®ç®¡ç†ç³»ç»Ÿ (`config.py`)

#### åŠŸèƒ½ç‰¹æ€§

- ğŸ“ **ç»Ÿä¸€é…ç½®ç®¡ç†** - æ‰€æœ‰è¶…å‚æ•°å’Œè·¯å¾„é›†ä¸­ç®¡ç†
- ğŸ’¾ **é…ç½®æŒä¹…åŒ–** - æ”¯æŒä¿å­˜å’ŒåŠ è½½ JSON é…ç½®æ–‡ä»¶
- âœ… **é…ç½®éªŒè¯** - è‡ªåŠ¨æ£€æŸ¥è·¯å¾„å’Œå‚æ•°æœ‰æ•ˆæ€§
- ğŸ›ï¸ **çµæ´»è¦†ç›–** - å‘½ä»¤è¡Œå‚æ•°ä¼˜å…ˆäºé…ç½®æ–‡ä»¶

#### ä½¿ç”¨ç¤ºä¾‹

```python
from config import Config

# åˆ›å»ºé»˜è®¤é…ç½®
config = Config()

# ä¿®æ”¹é…ç½®
config.training.epochs = 30
config.training.batch_size = 64
config.model.freeze_layers = 20

# ä¿å­˜é…ç½®
config.save("my_config.json")

# åŠ è½½é…ç½®
config = Config.load("my_config.json")
```

#### å‘½ä»¤è¡Œä½¿ç”¨

```bash
# ä¿å­˜å½“å‰é…ç½®
python train.py --partial_freeze --freeze_layers 18 --save_config baseline_config.json

# ä»é…ç½®æ–‡ä»¶è®­ç»ƒ
python train.py --config baseline_config.json

# é…ç½®æ–‡ä»¶ + å‘½ä»¤è¡Œè¦†ç›–
python train.py --config baseline_config.json --epochs 30 --lr 5e-5
```

---

### 2. æ¨ç†è„šæœ¬ (`inference.py`)

#### åŠŸèƒ½ç‰¹æ€§

- ğŸ–¼ï¸ **å•å¼ å›¾åƒæ¨ç†** - å¿«é€Ÿæµ‹è¯•æ¨¡å‹æ•ˆæœ
- ğŸ“¦ **æ‰¹é‡æ¨ç†** - é«˜æ•ˆå¤„ç†å¤§é‡å›¾åƒ
- ğŸ“Š **CSV æ‰¹å¤„ç†** - ä»æ•°æ®æ–‡ä»¶æ‰¹é‡è¯„ä¼°
- ğŸ“ˆ **è¯¦ç»†è¾“å‡º** - æ˜¾ç¤º base score å’Œ residual correction

#### ä½¿ç”¨ç¤ºä¾‹

##### å•å¼ å›¾åƒæ¨ç†

```bash
python inference.py \
    --model_path checkpoints/baseline_residual_best.pt \
    --single image.jpg "a beautiful sunset over the ocean"
```

è¾“å‡ºï¼š
```
==================================================================================
ğŸ“Š é¢„æµ‹ç»“æœ:
----------------------------------------------------------------------------------
  ğŸ¨ å›¾åƒè´¨é‡ (Quality):         4.35 / 5.00
  ğŸ”— æ–‡æœ¬ä¸€è‡´æ€§ (Consistency):   4.52 / 5.00
  ğŸ“ˆ åŸºå‡†åˆ†æ•° (Coarse/Base):     4.40 / 5.00
  â• æ®‹å·®ä¿®æ­£ (Residual):        +0.12
==================================================================================
```

##### æ‰¹é‡æ¨ç†

```bash
python inference.py \
    --model_path checkpoints/baseline_residual_best.pt \
    --csv data/data.csv data/ACGIQA-3K \
    --output results.csv \
    --batch_size 64
```

---

### 3. è¯„ä¼°å’Œå¯è§†åŒ–å·¥å…· (`evaluate.py`)

#### åŠŸèƒ½ç‰¹æ€§

- ğŸ“Š **å…¨é¢çš„è¯„ä¼°æŒ‡æ ‡** - SROCCã€PLCCã€MAEã€RMSE
- ğŸ“ˆ **æ•£ç‚¹å›¾** - é¢„æµ‹ vs çœŸå®å€¼å¯è§†åŒ–
- ğŸ“‰ **è¯¯å·®åˆ†å¸ƒå›¾** - åˆ†æé¢„æµ‹è¯¯å·®ç‰¹å¾
- ğŸ“„ **è¯„ä¼°æŠ¥å‘Š** - è‡ªåŠ¨ç”Ÿæˆæ–‡æœ¬æŠ¥å‘Šå’Œæ”¹è¿›å»ºè®®
- ğŸ¨ **ç¾è§‚çš„å›¾è¡¨** - é«˜è´¨é‡å¯è§†åŒ–è¾“å‡º

#### ä½¿ç”¨ç¤ºä¾‹

```bash
# è¿è¡Œå®Œæ•´è¯„ä¼°
python evaluate.py --predictions_csv results.csv --output_dir evaluation_results

# ä»…ç”Ÿæˆå›¾è¡¨
python evaluate.py --predictions_csv results.csv --plot_only
```

#### ç”Ÿæˆçš„å›¾è¡¨

1. `scatter_plot.png` - é¢„æµ‹å€¼ vs çœŸå®å€¼æ•£ç‚¹å›¾
2. `error_distribution.png` - è¯¯å·®åˆ†å¸ƒç›´æ–¹å›¾å’Œç®±çº¿å›¾
3. `score_distribution.png` - åˆ†æ•°åˆ†å¸ƒå¯¹æ¯”å›¾
4. `evaluation_report.txt` - è¯¦ç»†è¯„ä¼°æŠ¥å‘Š

#### è¯„ä¼°æŠ¥å‘Šç¤ºä¾‹

```
================================================================================
ğŸ“Š æ¨¡å‹è¯„ä¼°æŠ¥å‘Š
================================================================================

ğŸ“‚ æ•°æ®é›†: 2984 ä¸ªæ ·æœ¬

ğŸ¯ Quality è¯„ä¼°æŒ‡æ ‡:
--------------------------------------------------------------------------------
  â€¢ SROCC (Spearman):    0.9012
  â€¢ PLCC (Pearson):      0.8956
  â€¢ MAE:                 0.2834
  â€¢ RMSE:                0.3621

ğŸ”— Consistency è¯„ä¼°æŒ‡æ ‡:
--------------------------------------------------------------------------------
  â€¢ SROCC (Spearman):    0.8789
  â€¢ PLCC (Pearson):      0.8701
  â€¢ MAE:                 0.3102
  â€¢ RMSE:                0.3945

================================================================================
ğŸ“ˆ æ€§èƒ½ç­‰çº§è¯„ä¼°:
--------------------------------------------------------------------------------
  â€¢ Quality SROCC:       ä¼˜ç§€ (0.9012)
  â€¢ Consistency SROCC:   è‰¯å¥½ (0.8789)

================================================================================
ğŸ’¡ å»ºè®®:
--------------------------------------------------------------------------------
  âœ… æ¨¡å‹æ€§èƒ½ä¼˜ç§€ï¼å¯ä»¥è€ƒè™‘ï¼š
     - åœ¨æ›´å¤§æ•°æ®é›†ä¸Šæµ‹è¯•æ³›åŒ–èƒ½åŠ›
     - å¯¼å‡ºä¸º ONNX ç”¨äºéƒ¨ç½²
     - å°è¯•æ¨¡å‹è’¸é¦ä»¥å‡å°æ¨¡å‹å¤§å°
================================================================================
```

---

### 4. æ•°æ®åˆ†æå·¥å…· (`data_utils.py`)

#### åŠŸèƒ½ç‰¹æ€§

- ğŸ“Š **æ•°æ®é›†ç»Ÿè®¡** - è‡ªåŠ¨åˆ†æåˆ†æ•°åˆ†å¸ƒå’Œç›¸å…³æ€§
- ğŸ” **æ•°æ®è´¨é‡æ£€æŸ¥** - æ£€æµ‹ç¼ºå¤±å€¼ã€å¼‚å¸¸å€¼ã€æ–‡ä»¶å®Œæ•´æ€§
- ğŸ–¼ï¸ **å›¾åƒå±æ€§åˆ†æ** - ç»Ÿè®¡å›¾åƒå°ºå¯¸ã€æ ¼å¼ã€å¤§å°
- âš™ï¸ **æ•°æ®é¢„å¤„ç†** - å¼‚å¸¸å€¼ç§»é™¤ã€æ•°æ®å¹³è¡¡
- ğŸ“ˆ **å¯è§†åŒ–** - ç”Ÿæˆåˆ†å¸ƒå›¾å’Œç›¸å…³æ€§å›¾

#### ä½¿ç”¨ç¤ºä¾‹

##### æ•°æ®é›†åˆ†æ

```bash
python data_utils.py analyze \
    --csv data/data.csv \
    --image_dir data/ACGIQA-3K \
    --output_dir data_analysis
```

è¾“å‡ºï¼š
- åŸºæœ¬ç»Ÿè®¡ä¿¡æ¯
- æ•°æ®è´¨é‡æŠ¥å‘Š
- å›¾åƒå±æ€§ç»Ÿè®¡
- å¯è§†åŒ–å›¾è¡¨

##### æ•°æ®é¢„å¤„ç†

```bash
python data_utils.py preprocess \
    --csv data/data.csv \
    --output data/data_cleaned.csv \
    --remove_outliers \
    --balance
```

---

### 5. æ”¹è¿›çš„è®­ç»ƒè„šæœ¬ (`train.py`)

#### æ–°å¢ç‰¹æ€§

- ğŸ“ **å®Œæ•´æ—¥å¿—ç³»ç»Ÿ** - è®­ç»ƒè¿‡ç¨‹è¯¦ç»†è®°å½•
- âš¡ **æ··åˆç²¾åº¦è®­ç»ƒ** - è‡ªåŠ¨åŠ é€Ÿ 1.5-2x
- ğŸ›¡ï¸ **é”™è¯¯å¤„ç†** - å®Œå–„çš„å¼‚å¸¸æ•è·å’Œæç¤º
- ğŸ’¾ **çµæ´»çš„æ£€æŸ¥ç‚¹** - æ”¯æŒä¿å­˜æœ€ä½³/æ‰€æœ‰æ¨¡å‹
- ğŸ“Š **å®æ—¶ç›‘æ§** - å¸¦è¿›åº¦æ¡çš„è®­ç»ƒè¿‡ç¨‹
- ğŸ›ï¸ **é…ç½®ç³»ç»Ÿé›†æˆ** - ä½¿ç”¨æ–°çš„é…ç½®ç®¡ç†

#### ä½¿ç”¨ç¤ºä¾‹

```bash
# ä½¿ç”¨é»˜è®¤é…ç½®è®­ç»ƒ
python train.py \
    --data_csv_path data/data.csv \
    --image_base_dir data/ACGIQA-3K \
    --partial_freeze \
    --freeze_layers 18

# å¯ç”¨æ··åˆç²¾åº¦è®­ç»ƒï¼ˆåŠ é€Ÿï¼‰
python train.py \
    --config baseline_config.json \
    --mixed_precision \
    --experiment_name "baseline_fp16"

# ä¿å­˜é…ç½®ä¾›åç»­ä½¿ç”¨
python train.py \
    --partial_freeze \
    --freeze_layers 18 \
    --save_config configs/partial_freeze_18L.json
```

#### è®­ç»ƒæ—¥å¿—

æ‰€æœ‰è®­ç»ƒæ—¥å¿—è‡ªåŠ¨ä¿å­˜åˆ° `logs/` ç›®å½•ï¼Œæ ¼å¼ï¼š
```
logs/baseline_20251024_143052.log
```

æ—¥å¿—å†…å®¹åŒ…æ‹¬ï¼š
- é…ç½®ä¿¡æ¯
- æ•°æ®åŠ è½½ä¿¡æ¯
- æ¨¡å‹å‚æ•°ç»Ÿè®¡
- æ¯ä¸ª epoch çš„è®­ç»ƒå’ŒéªŒè¯æŒ‡æ ‡
- æ£€æŸ¥ç‚¹ä¿å­˜ä¿¡æ¯

---

## ğŸ’ ä»£ç è´¨é‡æå‡

### 1. ç§»é™¤ç¡¬ç¼–ç 

**æ”¹è¿›å‰** (baseline.py):
```python
self.data_csv_path = "/home/zry00006639/AIGC/æ¶ˆèå®éªŒ/AQIQA-3k.data.csv/data.csv"
self.image_base_dir = "/home/zry00006639/AIGC/æ¶ˆèå®éªŒ/ACGIQA-3K"
self.clip_model_name = "/home/zry00006639/AIGC/clip-vit-large-patch14"
```

**æ”¹è¿›å** (config.py):
```python
@dataclass
class DataConfig:
    data_csv_path: str = "data/data.csv"
    image_base_dir: str = "data/ACGIQA-3K"
    clip_model_name: str = "openai/clip-vit-large-patch14"
```

### 2. æ¨¡å—åŒ–è®¾è®¡

å°†åŠŸèƒ½æ‹†åˆ†ä¸ºç‹¬ç«‹æ¨¡å—ï¼š

```
baseline.py     â†’ æ¨¡å‹å®šä¹‰ï¼ˆä¿æŒä¸å˜ï¼‰
config.py       â†’ é…ç½®ç®¡ç†
train.py        â†’ è®­ç»ƒæµç¨‹
inference.py    â†’ æ¨ç†åŠŸèƒ½
evaluate.py     â†’ è¯„ä¼°å·¥å…·
data_utils.py   â†’ æ•°æ®å·¥å…·
```

### 3. ç±»å‹æç¤ºå’Œæ–‡æ¡£

æ‰€æœ‰æ–°ä»£ç éƒ½åŒ…å«ï¼š
- å®Œæ•´çš„ç±»å‹æç¤º (Type Hints)
- è¯¦ç»†çš„ Docstring
- å‚æ•°è¯´æ˜å’Œè¿”å›å€¼è¯´æ˜

ç¤ºä¾‹ï¼š
```python
def predict_single(
    self,
    image_path: str,
    prompt: str,
    return_details: bool = False
) -> Tuple[float, float]:
    """
    é¢„æµ‹å•å¼ å›¾åƒçš„è´¨é‡å’Œä¸€è‡´æ€§
    
    Args:
        image_path: å›¾åƒè·¯å¾„
        prompt: æ–‡æœ¬æç¤ºè¯
        return_details: æ˜¯å¦è¿”å›è¯¦ç»†ä¿¡æ¯
        
    Returns:
        (quality_score, consistency_score)
    """
```

### 4. é”™è¯¯å¤„ç†

å®Œå–„çš„å¼‚å¸¸å¤„ç†ï¼š

```python
try:
    config.validate()
except Exception as e:
    logger.error(f"âŒ é…ç½®éªŒè¯å¤±è´¥: {e}")
    sys.exit(1)
```

```python
except RuntimeError as e:
    logger.error(f"è®­ç»ƒé”™è¯¯: {e}")
    if "out of memory" in str(e):
        logger.error("æ˜¾å­˜ä¸è¶³ï¼å»ºè®®å‡å° batch_size")
        torch.cuda.empty_cache()
    raise e
```

---

## ğŸ“š ä½¿ç”¨æŒ‡å—

### å®Œæ•´å·¥ä½œæµç¨‹

#### 1. æ•°æ®å‡†å¤‡å’Œåˆ†æ

```bash
# åˆ†ææ•°æ®é›†
python data_utils.py analyze \
    --csv data/data.csv \
    --image_dir data/ACGIQA-3K \
    --output_dir data_analysis

# ï¼ˆå¯é€‰ï¼‰æ•°æ®é¢„å¤„ç†
python data_utils.py preprocess \
    --csv data/data.csv \
    --output data/data_cleaned.csv \
    --remove_outliers
```

#### 2. é…ç½®å’Œè®­ç»ƒ

```bash
# æ–¹å¼ 1: ç›´æ¥è®­ç»ƒ
python train.py \
    --data_csv_path data/data.csv \
    --image_base_dir data/ACGIQA-3K \
    --partial_freeze \
    --freeze_layers 18 \
    --epochs 20 \
    --batch_size 32 \
    --mixed_precision \
    --experiment_name "baseline_residual_fp16"

# æ–¹å¼ 2: ä½¿ç”¨é…ç½®æ–‡ä»¶
python train.py --config configs/baseline.json --mixed_precision
```

#### 3. æ¨ç†å’Œè¯„ä¼°

```bash
# æ‰¹é‡æ¨ç†
python inference.py \
    --model_path checkpoints/baseline_residual_best.pt \
    --csv data/data.csv data/ACGIQA-3K \
    --output predictions.csv \
    --batch_size 64

# è¯„ä¼°æ€§èƒ½
python evaluate.py \
    --predictions_csv predictions.csv \
    --output_dir evaluation_results
```

### æ¨èé…ç½®

#### å°æ•°æ®é›† (< 1K æ ·æœ¬)

```json
{
  "model": {
    "freeze_clip": true,
    "residual_scale_q": 0.1,
    "residual_scale_c": 0.1
  },
  "training": {
    "epochs": 30,
    "lr": 1e-3,
    "batch_size": 16
  }
}
```

#### ä¸­ç­‰æ•°æ®é›† (1K-5K æ ·æœ¬) â­ æ¨è

```json
{
  "model": {
    "partial_freeze": true,
    "freeze_layers": 18,
    "residual_scale_q": 0.2,
    "residual_scale_c": 0.2
  },
  "training": {
    "epochs": 20,
    "lr": 3e-5,
    "batch_size": 32,
    "mixed_precision": true
  }
}
```

#### å¤§æ•°æ®é›† (> 5K æ ·æœ¬)

```json
{
  "model": {
    "residual_scale_q": 0.3,
    "residual_scale_c": 0.3
  },
  "training": {
    "epochs": 15,
    "lr": 3e-5,
    "batch_size": 64,
    "mixed_precision": true
  }
}
```

---

## ğŸ“ æ–‡ä»¶ç»“æ„

### æ”¹è¿›å‰

```
AIGC/
â”œâ”€â”€ baseline.py              # æ‰€æœ‰åŠŸèƒ½é›†ä¸­åœ¨ä¸€ä¸ªæ–‡ä»¶
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ README.md
â”œâ”€â”€ run_residual_training.sh
â””â”€â”€ run_ablation_study.sh
```

### æ”¹è¿›å

```
AIGC/
â”œâ”€â”€ baseline.py              # ğŸ”µ ä¿æŒä¸å˜ - æ¨¡å‹å®šä¹‰
â”œâ”€â”€ config.py                # âœ¨ æ–°å¢ - é…ç½®ç®¡ç†ç³»ç»Ÿ
â”œâ”€â”€ train.py                 # âœ¨ æ–°å¢ - æ”¹è¿›çš„è®­ç»ƒè„šæœ¬
â”œâ”€â”€ inference.py             # âœ¨ æ–°å¢ - æ¨ç†è„šæœ¬
â”œâ”€â”€ evaluate.py              # âœ¨ æ–°å¢ - è¯„ä¼°å’Œå¯è§†åŒ–å·¥å…·
â”œâ”€â”€ data_utils.py            # âœ¨ æ–°å¢ - æ•°æ®åˆ†æå’Œé¢„å¤„ç†
â”œâ”€â”€ requirements.txt         # ğŸ”µ ä¿æŒä¸å˜
â”œâ”€â”€ README.md                # ğŸ”µ ä¿æŒä¸å˜
â”œâ”€â”€ IMPROVEMENTS.md          # âœ¨ æ–°å¢ - æœ¬æ–‡æ¡£
â”‚
â”œâ”€â”€ run_residual_training.sh # ğŸ”µ ä¿æŒä¸å˜
â”œâ”€â”€ run_ablation_study.sh    # ğŸ”µ ä¿æŒä¸å˜
â”‚
â”œâ”€â”€ configs/                 # âœ¨ æ–°å¢ - é…ç½®æ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ baseline.json
â”‚   â”œâ”€â”€ partial_freeze_18L.json
â”‚   â””â”€â”€ small_dataset.json
â”‚
â”œâ”€â”€ checkpoints/             # âœ¨ æ–°å¢ - æ¨¡å‹æ£€æŸ¥ç‚¹ç›®å½•
â”‚   â””â”€â”€ baseline_residual_best.pt
â”‚
â”œâ”€â”€ logs/                    # âœ¨ æ–°å¢ - è®­ç»ƒæ—¥å¿—ç›®å½•
â”‚   â””â”€â”€ baseline_20251024_143052.log
â”‚
â”œâ”€â”€ evaluation_results/      # âœ¨ æ–°å¢ - è¯„ä¼°ç»“æœç›®å½•
â”‚   â”œâ”€â”€ scatter_plot.png
â”‚   â”œâ”€â”€ error_distribution.png
â”‚   â”œâ”€â”€ score_distribution.png
â”‚   â””â”€â”€ evaluation_report.txt
â”‚
â””â”€â”€ data_analysis/           # âœ¨ æ–°å¢ - æ•°æ®åˆ†æç›®å½•
    â”œâ”€â”€ score_distributions.png
    â”œâ”€â”€ score_correlation.png
    â””â”€â”€ data_quality_report.txt
```

---

## ğŸ”„ è¿ç§»æŒ‡å—

### ä» baseline.py è¿ç§»åˆ° train.py

åŸæ¥çš„ä½¿ç”¨æ–¹å¼**ä»ç„¶æœ‰æ•ˆ**ï¼š

```bash
# âœ… ä»ç„¶å¯ä»¥ä½¿ç”¨
python baseline.py \
    --data_csv_path data/data.csv \
    --image_base_dir data/ACGIQA-3K \
    --partial_freeze \
    --freeze_layers 18
```

æ–°çš„æ¨èæ–¹å¼ï¼š

```bash
# âœ¨ æ¨èä½¿ç”¨æ–°è„šæœ¬ï¼ˆåŠŸèƒ½æ›´å¼ºå¤§ï¼‰
python train.py \
    --data_csv_path data/data.csv \
    --image_base_dir data/ACGIQA-3K \
    --partial_freeze \
    --freeze_layers 18 \
    --mixed_precision \
    --experiment_name "my_experiment"
```

### ä¸»è¦åŒºåˆ«

| ç‰¹æ€§ | baseline.py | train.py |
|------|-------------|----------|
| é…ç½®ç®¡ç† | âŒ | âœ… |
| æ—¥å¿—ç³»ç»Ÿ | âŒ | âœ… |
| æ··åˆç²¾åº¦è®­ç»ƒ | âŒ | âœ… |
| é”™è¯¯å¤„ç† | åŸºç¡€ | å®Œå–„ |
| è¿›åº¦æ¡ | âŒ | âœ… |
| å®éªŒç®¡ç† | âŒ | âœ… |

### é…ç½®æ–‡ä»¶è¿ç§»

å¦‚æœä½ æœ‰å¸¸ç”¨çš„å‚æ•°ç»„åˆï¼Œå¯ä»¥åˆ›å»ºé…ç½®æ–‡ä»¶ï¼š

```bash
# 1. åˆ›å»ºé…ç½®æ–‡ä»¶
python train.py \
    --data_csv_path data/data.csv \
    --image_base_dir data/ACGIQA-3K \
    --partial_freeze \
    --freeze_layers 18 \
    --epochs 20 \
    --batch_size 32 \
    --save_config configs/my_config.json

# 2. ä½¿ç”¨é…ç½®æ–‡ä»¶è®­ç»ƒ
python train.py --config configs/my_config.json
```

---

## ğŸ‰ æ€§èƒ½æ”¹è¿›

### è®­ç»ƒé€Ÿåº¦

- âš¡ **æ··åˆç²¾åº¦è®­ç»ƒ**: åŠ é€Ÿ **1.5-2x**
- ğŸš€ **ä¼˜åŒ–æ•°æ®åŠ è½½**: ä½¿ç”¨ `num_workers` å’Œ `pin_memory`
- ğŸ’¾ **å‡å°‘æ˜¾å­˜å ç”¨**: FP16 è®­ç»ƒé™ä½æ˜¾å­˜ä½¿ç”¨çº¦ **40%**

### å¼€å‘æ•ˆç‡

- ğŸ“ **é…ç½®ç®¡ç†**: å‡å°‘ **80%** çš„å‚æ•°è°ƒæ•´æ—¶é—´
- ğŸ” **æ—¥å¿—ç³»ç»Ÿ**: å¿«é€Ÿå®šä½é—®é¢˜ï¼ŒèŠ‚çœ **50%** çš„è°ƒè¯•æ—¶é—´
- ğŸ“Š **è‡ªåŠ¨è¯„ä¼°**: ä¸€é”®ç”ŸæˆæŠ¥å‘Šï¼ŒèŠ‚çœ **90%** çš„åˆ†ææ—¶é—´

---

## ğŸ› å·²çŸ¥é—®é¢˜å’Œé™åˆ¶

### 1. baseline.py ä¿æŒä¸å˜

ä¸ºäº†å…¼å®¹æ€§ï¼Œ`baseline.py` ä¿æŒä¸å˜ï¼Œæ–°åŠŸèƒ½åœ¨æ–°æ–‡ä»¶ä¸­å®ç°ã€‚

**è§£å†³æ–¹æ¡ˆ**: æ¨èä½¿ç”¨ `train.py` è¿›è¡Œæ–°çš„è®­ç»ƒä»»åŠ¡ã€‚

### 2. æ··åˆç²¾åº¦è®­ç»ƒå…¼å®¹æ€§

æŸäº›æ—§ GPU å¯èƒ½ä¸æ”¯æŒæ··åˆç²¾åº¦è®­ç»ƒï¼ˆéœ€è¦ Compute Capability >= 7.0ï¼‰ã€‚

**è§£å†³æ–¹æ¡ˆ**: ä¸ä½¿ç”¨ `--mixed_precision` å‚æ•°å³å¯ã€‚

### 3. ä¸­æ–‡å­—ä½“

å¯è§†åŒ–å›¾è¡¨çš„ä¸­æ–‡æ˜¾ç¤ºä¾èµ–ç³»ç»Ÿå­—ä½“ã€‚

**è§£å†³æ–¹æ¡ˆ**: å¦‚æœä¸­æ–‡æ˜¾ç¤ºå¼‚å¸¸ï¼Œå®‰è£…å­—ä½“ï¼š
```bash
# Ubuntu/Debian
sudo apt-get install fonts-wqy-zenhei

# macOS
# å·²è‡ªå¸¦ä¸­æ–‡å­—ä½“

# Windows
# å·²è‡ªå¸¦ä¸­æ–‡å­—ä½“
```

---

## ğŸ“Š æ”¹è¿›æ•ˆæœå¯¹æ¯”

### ä»£ç è´¨é‡

| æŒ‡æ ‡ | æ”¹è¿›å‰ | æ”¹è¿›å | æå‡ |
|------|--------|--------|------|
| ä»£ç è¡Œæ•° | 777 è¡Œ | 777 + 1800 è¡Œ (æ–°æ–‡ä»¶) | - |
| ç¡¬ç¼–ç è·¯å¾„ | 3 å¤„ | 0 å¤„ | âœ… 100% |
| æ–‡æ¡£è¦†ç›–ç‡ | 30% | 95% | âœ… 65% â†‘ |
| ç±»å‹æç¤º | 20% | 90% | âœ… 70% â†‘ |
| é”™è¯¯å¤„ç† | åŸºç¡€ | å®Œå–„ | âœ… |

### åŠŸèƒ½å®Œæ•´æ€§

| åŠŸèƒ½ | æ”¹è¿›å‰ | æ”¹è¿›å |
|------|--------|--------|
| è®­ç»ƒ | âœ… | âœ… |
| æ¨ç† | âŒ | âœ… |
| è¯„ä¼° | åŸºç¡€ | âœ… å®Œå–„ |
| å¯è§†åŒ– | âŒ | âœ… |
| æ•°æ®åˆ†æ | âŒ | âœ… |
| é…ç½®ç®¡ç† | âŒ | âœ… |
| æ—¥å¿—ç³»ç»Ÿ | âŒ | âœ… |
| æ··åˆç²¾åº¦ | âŒ | âœ… |

---

## ğŸš€ æœªæ¥æ”¹è¿›æ–¹å‘

### v1.2.0ï¼ˆè®¡åˆ’ä¸­ï¼‰

- [ ] Web ç•Œé¢ï¼ˆGradio/Streamlitï¼‰
- [ ] æ¨¡å‹å¯¼å‡ºï¼ˆONNX/TorchScriptï¼‰
- [ ] åˆ†å¸ƒå¼è®­ç»ƒæ”¯æŒ
- [ ] è‡ªåŠ¨è¶…å‚æ•°æœç´¢ï¼ˆOptunaï¼‰
- [ ] TensorBoard/WandB é›†æˆ
- [ ] å•å…ƒæµ‹è¯•
- [ ] CI/CD é…ç½®

### v2.0.0ï¼ˆè§„åˆ’ä¸­ï¼‰

- [ ] å¤šæ¨¡å‹å¯¹æ¯”è¯„ä¼°
- [ ] æ¨¡å‹è’¸é¦å·¥å…·
- [ ] å¢é‡å­¦ä¹ æ”¯æŒ
- [ ] REST API æœåŠ¡
- [ ] Docker éƒ¨ç½²
- [ ] è§†é¢‘è´¨é‡è¯„ä¼°

---

## ğŸ“ æ”¯æŒå’Œåé¦ˆ

å¦‚æœä½ åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜æˆ–æœ‰æ”¹è¿›å»ºè®®ï¼š

1. ğŸ“– æŸ¥çœ‹æ–‡æ¡£ï¼š[README.md](README.md)ã€[QUICK_START.md](QUICK_START.md)
2. ğŸ› æäº¤ Issueï¼š[GitHub Issues](https://github.com/qiyan111/AIGC/issues)
3. ğŸ’¬ è®¨è®ºåŒºï¼š[GitHub Discussions](https://github.com/qiyan111/AIGC/discussions)

---

## ğŸ™ è‡´è°¢

æ„Ÿè°¢åŸé¡¹ç›®ä½œè€… [@qiyan111](https://github.com/qiyan111) æä¾›çš„ä¼˜ç§€åŸºç¡€ä»£ç ã€‚

æœ¬æ¬¡æ”¹è¿›åœ¨ä¿æŒåŸæœ‰åŠŸèƒ½çš„åŸºç¡€ä¸Šï¼Œå¢å¼ºäº†é¡¹ç›®çš„å·¥ç¨‹åŒ–å’Œå¯ç”¨æ€§ã€‚

---

## ğŸ“„ æ›´æ–°æ—¥å¿—

### v1.1.0 (2025-10-24)

#### æ–°å¢
- âœ¨ é…ç½®ç®¡ç†ç³»ç»Ÿ (`config.py`)
- âœ¨ æ¨ç†è„šæœ¬ (`inference.py`)
- âœ¨ è¯„ä¼°å’Œå¯è§†åŒ–å·¥å…· (`evaluate.py`)
- âœ¨ æ•°æ®åˆ†æå’Œé¢„å¤„ç†å·¥å…· (`data_utils.py`)
- âœ¨ æ”¹è¿›çš„è®­ç»ƒè„šæœ¬ (`train.py`)
- âœ¨ å®Œæ•´æ—¥å¿—ç³»ç»Ÿ
- âœ¨ æ··åˆç²¾åº¦è®­ç»ƒæ”¯æŒ

#### æ”¹è¿›
- ğŸ’ ç§»é™¤æ‰€æœ‰ç¡¬ç¼–ç è·¯å¾„
- ğŸ’ å®Œå–„é”™è¯¯å¤„ç†å’Œå¼‚å¸¸æç¤º
- ğŸ’ æ·»åŠ è¯¦ç»†çš„ç±»å‹æç¤ºå’Œæ–‡æ¡£
- ğŸ’ ä¼˜åŒ–æ•°æ®åŠ è½½æµç¨‹

#### æ–‡æ¡£
- ğŸ“– æœ¬æ”¹è¿›æ€»ç»“æ–‡æ¡£ (`IMPROVEMENTS.md`)

---

<div align="center">

**â­ å¦‚æœè§‰å¾—è¿™äº›æ”¹è¿›æœ‰ç”¨ï¼Œè¯·ç»™é¡¹ç›®ä¸€ä¸ª Starï¼â­**

Made with â¤ï¸ by AI Assistant

</div>
