#!/bin/bash
# цоЛх╖охнжф╣ац╢ИшЮНхоЮщкМ
# хп╣цпФф╕НхРМщЕНч╜очЪДцХИцЮЬ

echo "========================================================================"
echo "цоЛх╖охнжф╣ац╢ИшЮНхоЮщкМ - хп╣цпФ 4 чзНщЕНч╜о"
echo "========================================================================"
echo ""

# ===== хоЮщкМ 1: хЯ║хЗЖя╝Иф╝ач╗Яцибх╝Пя╝Мф╕Нф╜┐чФицоЛх╖охнжф╣ая╝Й=====
echo "ЁЯФ╡ хоЮщкМ 1/4: ф╝ач╗Яцибх╝Пя╝ИхЯ║хЗЖя╝Й"
echo "   - ф╕Нф╜┐чФицоЛх╖охнжф╣а"
echo "   - CLIP хоМхЕихПпшонч╗Г"
echo "   - цибхЮЛ: baseline_best.pt"
echo ""

python baseline.py \
    --no_residual_learning \
    --epochs 20 \
    --batch_size 32 \
    --lr 3e-5 \
    --w_q 0.5 \
    --w_c 0.5

echo ""
echo "тЬЕ хоЮщкМ 1 хоМцИР"
echo "------------------------------------------------------------------------"
echo ""

# ===== хоЮщкМ 2: цоЛх╖охнжф╣ая╝ИхоМхЕих╛ош░Гя╝Й=====
echo "ЁЯЯв хоЮщкМ 2/4: цоЛх╖охнжф╣а + хоМхЕих╛ош░Г"
echo "   - тЬЕ ф╜┐чФицоЛх╖охнжф╣а"
echo "   - CLIP хоМхЕихПпшонч╗Г"
echo "   - цибхЮЛ: baseline_residual_best.pt"
echo ""

python baseline.py \
    --epochs 20 \
    --batch_size 32 \
    --lr 3e-5 \
    --w_q 0.5 \
    --w_c 0.5

echo ""
echo "тЬЕ хоЮщкМ 2 хоМцИР"
echo "------------------------------------------------------------------------"
echo ""

# ===== хоЮщкМ 3: цоЛх╖охнжф╣а + щГихИЖхЖ╗ч╗Уя╝ИцОишНРя╝Й=====
echo "ЁЯЯб хоЮщкМ 3/4: цоЛх╖охнжф╣а + щГихИЖхЖ╗ч╗У тнР цОишНР"
echo "   - тЬЕ ф╜┐чФицоЛх╖охнжф╣а"
echo "   - ЁЯзК хЙН 18 х▒ВхЖ╗ч╗У"
echo "   - цибхЮЛ: baseline_residual_partial_freeze_18L_best.pt"
echo ""

python baseline.py \
    --partial_freeze \
    --freeze_layers 18 \
    --epochs 20 \
    --batch_size 32 \
    --lr 3e-5 \
    --w_q 0.5 \
    --w_c 0.5

echo ""
echo "тЬЕ хоЮщкМ 3 хоМцИР"
echo "------------------------------------------------------------------------"
echo ""

# ===== хоЮщкМ 4: хоМхЕихЖ╗ч╗У CLIPя╝ИLinear Probingя╝Й=====
echo "ЁЯФ┤ хоЮщкМ 4/4: Linear Probingя╝ИхоМхЕихЖ╗ч╗У CLIPя╝Й"
echo "   - тЬЕ ф╜┐чФицоЛх╖охнжф╣а"
echo "   - тЭДя╕П  CLIP хоМхЕихЖ╗ч╗У"
echo "   - цЫ┤хдзхнжф╣ачОЗ: 1e-3"
echo "   - цибхЮЛ: baseline_residual_best.pt"
echo ""

python baseline.py \
    --freeze_clip \
    --epochs 20 \
    --batch_size 64 \
    --lr 1e-3 \
    --w_q 0.5 \
    --w_c 0.5

echo ""
echo "тЬЕ хоЮщкМ 4 хоМцИР"
echo "------------------------------------------------------------------------"
echo ""

echo "========================================================================"
echo "ц╢ИшЮНхоЮщкМхЕищГихоМцИРя╝Б"
echo "========================================================================"
echo ""
echo "ЁЯУК чФЯцИРчЪДцибхЮЛцЦЗф╗╢я╝Ъ"
echo "   1. baseline_best.pt                               (ф╝ач╗Яцибх╝П)"
echo "   2. baseline_residual_best.pt                      (цоЛх╖охнжф╣а)"
echo "   3. baseline_residual_partial_freeze_18L_best.pt   (цоЛх╖о + щГихИЖхЖ╗ч╗У) тнР"
echo "   4. baseline_residual_best.pt                      (хоМхЕихЖ╗ч╗У)"
echo ""
echo "ЁЯТб ф╕Лф╕Ацнея╝Ъ"
echo "   1. хп╣цпФщкМшпБщЫЖ SROCC_Q хТМ SROCC_C"
echo "   2. хИЖцЮРшонч╗ГцЫ▓ч║┐я╝Иloss хТМ SROCCя╝Й"
echo "   3. цгАцЯеш┐ЗцЛЯхРИцГЕхЖ╡я╝Иtrain-val gapя╝Й"
echo "   4. щАЙцЛйцЬАф╜│щЕНч╜очФиф║ОцЬАч╗Ишонч╗Г"
echo ""
echo "щвДцЬЯч╗УцЮЬ:"
echo "   - хоЮщкМ 3я╝ИцоЛх╖о + щГихИЖхЖ╗ч╗Уя╝ЙщАЪх╕╕цХИцЮЬцЬАхе╜"
echo "   - хоЮщкМ 2 хЬихдзцХ░цНощЫЖф╕КхПпшГ╜чХеф╝Шф║ОхоЮщкМ 3"
echo "   - хоЮщкМ 1 хПпшГ╜ш┐ЗцЛЯхРИя╝Иtrain-val gap хдзя╝Й"
echo "   - хоЮщкМ 4 цЬАх┐ля╝Мф╜ЖцАзшГ╜хПпшГ╜чХеф╜О"
echo "========================================================================"

